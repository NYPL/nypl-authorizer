language: node_js
node_js:
- '6'
cache:
  directories:
  - node_modules
install: npm install
before_script: echo 'Running unit tests'
script: npm test
before_deploy: echo 'All unit tests passed; Preparing to deploy to AWS'
deploy:
- provider: script
  skip_cleanup: true
  script: npm run deploy-development
  on:
    branch: deploy-test
- provider: script
  skip_cleanup: true
  script: npm run deploy-production
  on:
    branch: master
after_deploy: echo 'Successfully deployed to AWS'
env:
  global:
    secure: PV/FP1lGntQPNSxQrkdoMqaN1oo4ZXzSx1uRw4gu3T4ccl0kZ0lccb4Bce32QapYScHULZOSFTGKJSh1/ATM9GcR9ZZUXQpoJ6xCFXR+Nbpi2SXP4gGnMYJfUeIyYyZmFi4TiBvqC/cF9iQHvA/tkYxQoNmtMgEUHSW7ZwUw5w6x7yAhJhst/dhc1LkgmJh+mCSqPTulb6DI3fmAminv7yERtAAZJgE4B7HomtOuqJPlPWwOcoczp1CfwEQlGnENwDZRPPyJ19TySfNXeXXm2BZkyYwtiixrrgsYqOiOzw8EPXJkC8+g4k8dQ/LVmlFlEV+UA6V7+tZHw6NPFzEjuKgLOerPM7QWAIamRhQXuprIx5W2bWM3Lt57Xd8kutOe01gn+GQ1JgKIyqNo0EBRIN5EctV7kwBg8zKF3ja7ewaDF66f+/l6Ve7dq9PxvHD4r68sxFSTaeiAURZQ8lY6TJ5OH8U1JBNn3Gque/DaDddDhmclSsjzNgzq12sO+f4TIgcz0k5JMMaMdy1W3zQWDDxYK2yLW137NkHNc7pMEROeyYUtkRTGeFZgJdO/AgiDAcikZ/nP+oflHpld5ldrtlMqZyZP5FKCMZhzYtint+FPIQU8E3Aoy6T0Pjaw/5OtJKm5Vt70j7rLMfr87lc6hmGZFI/jigj63JJgK4JUGCk=
