language: node_js
node_js:
- '6'
cache:
  directories:
  - node_modules
install: npm install
before_script: echo 'Running unit tests'
script: npm test
before_deploy: echo 'All unit tests passed; Preparing to deploy to AWS'
deploy:
- provider: script
  script: npm run deploy-development
  on:
    branch: deploy-test
- provider: script
  script: npm run deploy-production
  on:
    branch: master
after_deploy: echo 'Successfully deployed to AWS'
env:
  global:
    secure: gnfJCyurA73gCac1r/DUl2f0pWdgcMyiohXHbYK0cTNkzVRhvvP3VqwJzPuFQqrlwybnNfQYHCH2rQoL/9eGnNvByM7LxX7conKqbXlTzVshFs36wxxlBig4Mbq0HweZZZNXlYab0MXTH6ITlGxjj63nCGCYIhyqF9bF/ftukcuyXMfpERPXrTMxDwGBDAp5f/y+ziUZYv6ErUEHWoWN5uqETIRiyuZU4FE00Pvw6IFMUIrNRWSSBp2aHVzKBFWN7pfNBRe87br02aqDxAiVICANfFc7U35zZRExbYFnRYFUjm2vSZNRVXSk5Jh+Oe/0quXRwKeRSZH7rhz4sngfI2hAz07/gaOcD9NA6nWw/Xcbmcr+Rp3Q3SRYEZOuJCeLgY75cM9WjRfGUQO9SIN1MIMC/QzCBLvAqqjrYrfxMkGngto63N8mu6BOUn5rqI1DvriqC2xQKAVFppjFaK1MhzNli05U3MjRObY4lQmpW7bonYDoMjrhmi8zY6xqoxcRQCEi7GQpLtiQmpkfVqp2J2dfw6WBK/2hlYI2b3YnM7phJFXJVoKrBGyAmnNIMtjMKzozSpZzols4HzXERwCiepQSjxn371zngJQKAwCTnWn2n3CdZH02c/HfuRSHjG98AvsYeFZpxWj6sRWJYYfz6eYxO7BqsVAtailJE0FjmQ4=
